#!/bin/bash

rm -f table_*.csv

for KNUDSEN in 0.010737418240000001 0.013421772800000002 0.016777216 0.02097152 0.0262144 0.032768000000000005 0.04096 0.0512 0.06400000000000002 0.08000000000000002 0.1 0.125 0.15625 0.1953125 0.244140625 0.30517578125 0.3814697265625 0.476837158203125 0.5960464477539062 0.7450580596923828 0.9313225746154785 1.1641532182693481 1.4551915228366852 1.8189894035458565 2.2737367544323206 2.8421709430404007 3.552713678800501 4.440892098500626 5.551115123125783 6.938893903907228 8.673617379884035
do
  for I in 0 1 2 3 4
  do
    FILE="results_rotating_cavity${KNUDSEN}/kinetic_energy_velocity_${I}"
    if [ -f "$FILE" ]; then
      KINETIC_ENERGY_VELOCITY=$(cat "$FILE")
      echo "$KNUDSEN, $KINETIC_ENERGY_VELOCITY" >> "table_${I}.csv"
    else
      echo "WARN: Missing $FILE" >&2
    fi
  done
done

# Preview first table
[ -f table_0.csv ] && cat table_0.csv
